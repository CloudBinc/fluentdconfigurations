<source>
  @type exec
  command docker image ls
  format none
  tag docker
  run_interval 10s
</source>


<filter docker>
  @type concat
  key message
  multiline_start_regexp /^(REPOSITORY)\s+(TAG)\s+(IMAGE ID)\s+(CREATED)\s+(SIZE)/
  continuous_line_regexp /^(?!REPOSITORY)[aA-zZ.-/]+.*/
</filter>

<filter docker>
@type record_transformer
enable_ruby
  <record>
    data7 ${record["message"]}
    host "#{Socket.gethostname}"
    datatype7 "docker"
  </record>
</filter>

<filter docker>
@type record_transformer
enable_ruby
  <record>
        time7 ${Time.now.to_i}
  </record>
        remove_keys message
</filter>
#file Output
<match docker>
@type file
@id docker_file1
path /var/log/td-agent/parseddocker1
</match>

