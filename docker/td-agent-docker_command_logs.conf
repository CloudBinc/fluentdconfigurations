<source>
  @type exec
  command docker image ls
<parse>
        @type multiline
        format /^(REPOSITORY)\s+(TAG)\s+(IMAGE ID)\s+(CREATED)\s+(SIZE)/
        format1 /(?<data7>(?<repository>[aA-zZ0-9/<>]+)\s+(?<tag>[aA-zZ0-9.-<>]+)\s+(?<image_id>[aA-zZ0-9]+)\s+(?<created>\d+\s\w+\s\w+)\s+(?<size>[A-Z0-9.]+))/
        #keys repository,tag,image_id,created,size
</parse>
  tag docker
  run_interval 10s
</source>

<filter docker>
@type record_transformer
enable_ruby
  <record>
    host "#{Socket.gethostname}"
    datatype7 "docker"
  </record>
</filter>

<filter docker>
@type record_transformer
enable_ruby
  <record>
   time7 ${Time.now.to_i}
  </record>
</filter>

#File Output
<match docker>
@type file
@id docker_file
path /var/log/td-agent/parseddocker
</match>

