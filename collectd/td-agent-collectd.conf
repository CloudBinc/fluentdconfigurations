<source>
        @type tail
        @id collectd
        tag collectdlogs
        #path /var/log/td-agent/collectdsamples/collectdsamples
        path /var/log/collectd/collectd.log
        format multiline
        format_firstline /\[(?<EventReceivedTimeStamp>\d+-\d+-\d+\s\d+:\d+:\d+)\]\s([aA-zZ_]+)\s(\w+)\:/
	format1 /(?<data7>^(\[\{\"values\".*)$)/
	time_key time7
	time_format "%Y-%m-%d %H:%M:%S"
</source>

<filter collectdlogs>
@type record_transformer
auto_typecast
enable_ruby
   <record>
    time7 ${Time.at(time).strftime('%s')}
   </record>
</filter>

<filter collectdlogs>
@type record_transformer
auto_typecast
enable_ruby
  <record>
    host "#{Socket.gethostname}"
    datatype7 "collectd"
    time7 ${record["time7"].to_i}
  </record>
</filter>

#######File Output#######
<match collectdlogs>
@type file
@id collectd_file
path /var/log/td-agent/parsedcollectd
</match>

